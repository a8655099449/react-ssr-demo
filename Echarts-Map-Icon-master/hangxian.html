<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Kinghiee-èˆªçº¿å›¾</title>
  <meta name="viewport"
    content="width=device-width,initial-scale=1.0,minimum-scale=1,maximum-scale=5,user-scalable=yes" />
  <meta name="format-detection" content="telephone=no,email=no" />
  <script src="./js/echarts.min.js"></script>
  <script src="./js/china.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

  <style>
    * {
      margin: 0;
    }

    html,
    body,
    #line,
    #airLine {
      height: 100%;
    }
  </style>
</head>

<body>
  <div id="line">
    <div id="airLine"></div>
  </div>
  <script>
    let kinghiee = new Vue({
      el: "#line",
      data: {
        SHData: [
          [{ name: 'ä¸Šæµ·' }, { name: 'åŒ…å¤´', value: 95 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'æ˜†æ˜Ž', value: 90 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'å¹¿å·ž', value: 80 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'éƒ‘å·ž', value: 70 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'é•¿æ˜¥', value: 60 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'é‡åº†', value: 50 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'é•¿æ²™', value: 40 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'åŒ—äº¬', value: 30 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'ä¸¹ä¸œ', value: 20 }],
          [{ name: 'ä¸Šæµ·' }, { name: 'å¤§è¿ž', value: 10 }]
        ],
        geoCoordMap: {
          'ä¸Šæµ·': [121.4648, 31.2891],
          'ä¸¹ä¸œ': [124.541, 40.4242],
          'åŒ…å¤´': [110.3467, 41.4899],
          'åŒ—äº¬': [116.4551, 40.2539],
          'å¤§è¿ž': [122.2229, 39.4409],
          'å¹¿å·ž': [113.5107, 23.2196],
          'é‡åº†': [107.7539, 30.1904],
          'éƒ‘å·ž': [113.4668, 34.6234],
          'é•¿æ²™': [113.0823, 28.2568],
          'é•¿æ˜¥': [125.8154, 44.2584],
          'æ˜†æ˜Ž': [102.9199, 25.4663],
        },
        planePath: 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z',
      },
      methods: {
        loca() {
          let series = [];
          [['ä¸Šæµ·', this.SHData]].forEach((item, i) => {
            //console.log(item[1]);//å¾—åˆ°ä¸Šæµ·æ•°ç»„
            series.push({
              type: 'lines',//ç”¨äºŽå¸¦æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ä¿¡æ¯çš„çº¿æ•°æ®çš„ç»˜åˆ¶ï¼Œä¸»è¦ç”¨äºŽåœ°å›¾ä¸Šçš„èˆªçº¿ï¼Œè·¯çº¿çš„å¯è§†åŒ–ã€‚
              zlevel: 1,
              effect: {//çº¿ç‰¹æ•ˆçš„é…ç½®
                show: true,
                period: 6,//ç‰¹æ•ˆåŠ¨ç”»çš„æ—¶é—´
                trailLength: 0.7,//ç‰¹æ•ˆå°¾è¿¹çš„é•¿åº¦ã€‚å–ä»Ž 0 åˆ° 1 çš„å€¼ï¼Œæ•°å€¼è¶Šå¤§å°¾è¿¹è¶Šé•¿ã€‚
                color: '#fff',
                symbolSize: 3,//ç‰¹æ•ˆæ ‡è®°çš„å¤§å°ï¼Œå¯ä»¥è®¾ç½®æˆè¯¸å¦‚ 10 è¿™æ ·å•ä¸€çš„æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨æ•°ç»„åˆ†å¼€è¡¨ç¤ºé«˜å’Œå®½ï¼Œä¾‹å¦‚ [20, 10] è¡¨ç¤ºæ ‡è®°å®½ä¸º20ï¼Œé«˜ä¸º10ã€‚
              },
              lineStyle: {
                normal: {
                  color: '#46bee9',
                  width: 0,
                  curveness: 0.2,//è¾¹çš„æ›²åº¦ï¼Œæ”¯æŒä»Ž 0 åˆ° 1 çš„å€¼ï¼Œå€¼è¶Šå¤§æ›²åº¦è¶Šå¤§
                }
              },
              data: this.convertData(item[1])//çº¿æ•°æ®é›†ã€‚
            },
              {
                type: 'lines',
                zlevel: 2,
                symbol: ['none', 'arrow'],//çº¿ä¸¤ç«¯çš„æ ‡è®°ç±»åž‹ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„åˆ†åˆ«æŒ‡å®šä¸¤ç«¯
                symbolSize: 10,
                effect: {
                  show: true,
                  period: 6,
                  trailLength: 0,
                  symbol: this.planePath,
                  symbolSize: 15
                },
                lineStyle: {
                  color: '#46bee9',
                  width: 1,
                  opacity: 0.6,
                  curveness: 0.2
                },
                data: this.convertData(item[1])
              },
              {
                type: 'effectScatter',//å¸¦æœ‰æ¶Ÿæ¼ªç‰¹æ•ˆåŠ¨ç”»çš„æ•£ç‚¹ï¼ˆæ°”æ³¡ï¼‰å›¾ã€‚åˆ©ç”¨åŠ¨ç”»ç‰¹æ•ˆå¯ä»¥å°†æŸäº›æƒ³è¦çªå‡ºçš„æ•°æ®è¿›è¡Œè§†è§‰çªå‡ºã€‚
                coordinateSystem: 'geo',//è¯¥ç³»åˆ—ä½¿ç”¨çš„åæ ‡ç³»
                zlevel: 2,
                rippleEffect: {//æ¶Ÿæ¼ªç‰¹æ•ˆç›¸å…³é…ç½®
                  brushType: 'stroke'
                },
                label: {//å›¾å½¢ä¸Šçš„æ–‡æœ¬æ ‡ç­¾ï¼Œå¯ç”¨äºŽè¯´æ˜Žå›¾å½¢çš„ä¸€äº›æ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚å€¼ï¼Œåç§°ç­‰
                  show: true,
                  position: 'right',
                  formatter: '{b}'
                },
                symbolSize: function (val) {//æ ‡è®°çš„å¤§å°
                  return val[2] / 8;
                },
                itemStyle: {
                  color: '#46bee9'
                },
                data: item[1].map((dataItem) => {
                  return {
                    name: dataItem[1].name,
                    value: this.geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                  };
                })
              });
          });
          return series;
        },
        convertData(data) {
          var res = [];
          //console.log(data.length);é•¿åº¦ä¸º10
          for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = this.geoCoordMap[dataItem[0].name];//å§‹å‘åœ°
            var toCoord = this.geoCoordMap[dataItem[1].name];//ç›®çš„åœ°
            if (fromCoord && toCoord) {
              res.push({
                fromName: dataItem[0].name,
                toName: dataItem[1].name,
                coords: [fromCoord, toCoord],//ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªåˆ°å¤šä¸ªäºŒç»´åæ ‡çš„æ•°ç»„ã€‚åœ¨ polyline è®¾ç½®ä¸º true æ—¶æ”¯æŒå¤šäºŽä¸¤ä¸ªçš„åæ ‡ã€‚
              });
            }
          }
          return res;
        },

        createLine(seriesData) {

          // seriesData[1].data = seriesData[1].data[0]
          console.log('ðŸ‘´2021-07-14 18:00:14 hangxian.html line:154',)
          seriesData = seriesData[1]



          let myChart = echarts.init(document.getElementById('airLine'));
          myChart.setOption({
            backgroundColor: "#404a59",//è®¾ç½®æ•´ä½“èƒŒæ™¯è‰²
            title: {//æ ‡é¢˜è®¾ç½®
              text: 'airLine',
              left: 'center',
              textStyle: {
                color: '#fff',
                fontFamily: "Monospace",
                fontWeight: "lighter"
              },
            },
            geo: {//åœ°ç†åæ ‡ç³»ç»„ä»¶ç”¨äºŽåœ°å›¾çš„ç»˜åˆ¶ï¼Œæ”¯æŒåœ¨åœ°ç†åæ ‡ç³»ä¸Šç»˜åˆ¶æ•£ç‚¹å›¾ï¼Œçº¿é›†ã€‚
              map: 'china',//é…ç½®ä¸­å›½åœ°å›¾
              roam: true,//æ˜¯å¦å¼€å¯é¼ æ ‡ç¼©æ”¾å’Œå¹³ç§»æ¼«æ¸¸
              itemStyle: {
                areaColor: '#323c48',//è®¾ç½®åŒºåŸŸé¢œè‰²
                borderColor: '#404a59'//è®¾ç½®å„å„çœå¸‚è¾¹ç•Œé¢œè‰²
              },
              emphasis: {
                show: true,
                itemStyle: {
                  areaColor: '#2a333d'
                }
              }
            },
            series: seriesData[1]
          })
        }
      },
      mounted() {

        this.createLine(this.loca());
      }
    });
  </script>
</body>

</html>